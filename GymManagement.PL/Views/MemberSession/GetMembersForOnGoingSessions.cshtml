@using GymManagement.BLL.ViewModels.MemberSession
@model IEnumerable<MemberSessionViewModel>
@{
	ViewData["Title"] = "Power fitness | On Going Sessions";
}
<header class="bg-primary text-white rounded-3 p-4 shadow-sm mt-5 mb-4">
	<div class="d-flex justify-content-between align-items-center">
		<div>
			<h2 class="mb-1 fw-semibold">Session Members</h2>
			<p class="mb-0 text-light opacity-75">Members That Already Book Session</p>
		</div>
		<div class="text-end">
			<a asp-action="CreateMemberSession" asp-route-id="@ViewBag.SessionId" asp-controller="MemberSession" class="btn btn-light">
				<i class="fas fa-plus me-1"></i> New Booking
			</a>
		</div>
	</div>
</header>
<div class="card shadow-sm">

	<div class="card-body">
		@if (Model.Where(ms => ms.Status == "OnGoing").Any())
		{
			<table class="table table-striped table-hover align-middle text-center">
				<thead>
					<tr>
						<th>Member</th>
						<th>Booking Date</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					@foreach (var memberSession in Model)
					{
						<tr>
							<td>@memberSession.MemberName</td>
							<td>@memberSession.BookingDate</td>
							<td>
								<div class="d-flex justify-content-center gap-1">
									<form method="post" asp-controller="MemberSession" asp-route-id="@memberSession.Id" asp-action="DeleteMemberSession" class="m-0">
										<button type="submit" class="btn btn-sm btn-danger"
												onclick="return confirm('Are you sure you want to cancel this booking?');">
											<i class="fas fa-times"></i> Cancel
								 		</button>
									</form>
								</div>
							</td>
						</tr>
					}

				</tbody>
			</table>
		}

		else
		{
			<div class="text-center py-5">
				<i class="bi bi-person-workspace display-1 text-muted"></i>
				<h4 class="mt-3 text-muted">No Bookings Available</h4>
				<p class="text-muted">Add your first booking to get started</p>
			</div>
		}
	</div>

	<a asp-controller="MemberSession" asp-action="Index" class="btn btn-fill ">Back to List</a>

</div>